services:
  # ... your existing OpenSpeedTest service can stay here if you want both ...

  internet-monitoring:
    image: lscr.io/linuxserver/speedtest-tracker:latest@sha256:4023b3e993d3764efe41d65eb4d1be8d9ff2ad8d756eb71de35fe805882ff0b5
    container_name: speedtest-tracker
    restart: unless-stopped
    ports:
      - "8443:443"  # Secure HTTPS access
      - "8080:80"   # Standard web access (Change 8080 if already in use)
    volumes:
      - /volume2/FastSSD/docker/speedtest-tracker/config:/config
    environment:
      - PUID=1000
      - PGID=1000
      - TZ=Europe/London
      # Schedule: Runs at minute 0 of every hour (0 * * * *)
      - SPEEDTEST_SCHEDULE=0 */6 * * *
      # Optional: Remove old results after 90 days to save space
      - PRUNE_RESULTS_OLDER_THAN=90
      # Pass the key from the .env file to the container
      - APP_KEY=${SPEEDTEST_APP_KEY}
    env_file:
      - /volume2/FastSSD/docker/speedtest-tracker/.env
      # Add this dependency so they start together
    depends_on:
      - apprise

  # NEW SERVICE ðŸ‘‡
  apprise:
    image: caronc/apprise:latest@sha256:6a59bdd4ee8d5a71da2c50f9014befcebbb8acc48499c3d7910b46dec0d15abd
    container_name: apprise
    restart: unless-stopped
    ports:
      - "30005:8000"
    env_file:
      - /volume2/FastSSD/docker/speedtest-tracker/.env
