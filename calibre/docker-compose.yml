services:
  calibre:
    image: ghcr.io/linuxserver/calibre:latest
    container_name: Calibre-Desktop-Master
    mem_limit: 4g
    # "security_opt" is needed for the GUI to render correctly in some browsers
    security_opt:
      - seccomp:unconfined
    environment:
      - PUID=1000
      - PGID=10
      - TZ=Europe/Dublin
      - CUSTOM_USER=barry
      - PASSWORD=barrytemp
      # 1. FIX: Set a larger screen resolution for easier metadata editing
      - DRINODE_RESOLUTION=1920x1080
    volumes:
      # Config stays on FastSSD (Plugins, UI settings, etc.)
      - /volume2/FastSSD/docker/calibre:/config:rw
      # 2. FIX: Map your actual book library here
      - /volume1/SlowHDD/books/calibreweblib:/books:rw
    ports:
      - 7080:8080 # Access the GUI at http://NAS-IP:7080
      - 7081:8081 # Calibre Content Server (Optional)
      - 8181:8181 # Wireless Device Connection (Optional)
    restart: on-failure:5
