services:
  calibre:
    image: ghcr.io/linuxserver/calibre:latest@sha256:51e42276a0b0755e11fc9a4f6ea51c4179080e66f7befe41e2ac9b55d57b4c6e
    env_file:
      - /volume2/FastSSD/docker/calibre/.env
    container_name: Calibre
    mem_limit: 4g
    # "security_opt" is needed for the GUI to render correctly in some browsers
    security_opt:
      - seccomp:unconfined
    environment:
      - PUID=1000
      - PGID=10
      - TZ=Europe/Dublin
      - QT_SCALE_FACTOR=1.5  # <--- Note the dash (-) and the equals (=)
      - CUSTOM_USER=barry
      - PASSWORD=barrytemp
      # 1. FIX: Set a larger screen resolution for easier metadata editing
      - DRINODE_RESOLUTION=1280x720
    volumes:
      # Config stays on FastSSD (Plugins, UI settings, etc.)
      - /volume2/FastSSD/docker/calibre:/config:rw
      # 2. FIX: Map your actual book library here
      - /volume1/SlowHDD/books:/books:rw
    ports:
      - 7080:8080 # Access the GUI at http://NAS-IP:7080
      - 7081:8081 # Calibre Content Server (Optional)
      - 8181:8181 # Wireless Device Connection (Optional)
    restart: on-failure:5
