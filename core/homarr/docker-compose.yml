services:
  homarr:
    container_name: Homarr
    image: ghcr.io/homarr-labs/homarr:latest@sha256:1f34d8b5be9727aa222d2a6b090131ed017e6308548cc8fc5a394ed4d8b60064
    
    # 1. Loads SECRET_ENCRYPTION_KEY directly
    env_file:
      - /volume2/FastSSD/docker/homarr/.env
      
    healthcheck:
      test: ["CMD-SHELL", "nc -z 127.0.0.1 7575 || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 90s
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /volume1/docker/homarr:/appdata:rw
    ports:
      - 7575:7575
      
    # DELETED: environment section 
    # (SECRET_ENCRYPTION_KEY is now loaded safely from env_file)
      
    restart: on-failure:5
