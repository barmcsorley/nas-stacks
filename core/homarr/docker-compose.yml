services:
  homarr:
    container_name: Homarr
    image: ghcr.io/homarr-labs/homarr:latest@sha256:5307258cc39df4a076f15dc7a34f16e78412d6a61a364bd9b8084b94fd43fea5
    
    # 1. Loads SECRET_ENCRYPTION_KEY directly
    env_file:
      - /volume2/FastSSD/docker/homarr/.env
      
    healthcheck:
      test: ["CMD-SHELL", "nc -z 127.0.0.1 7575 || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 90s
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /volume1/docker/homarr:/appdata:rw
    ports:
      - 7575:7575
      
    # DELETED: environment section 
    # (SECRET_ENCRYPTION_KEY is now loaded safely from env_file)
      
    restart: on-failure:5
