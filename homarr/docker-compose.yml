services:
  homarr:
    container_name: Homarr
    image: ghcr.io/homarr-labs/homarr:latest@sha256:b09f15b3d220149ef67ef0d12a56ef27fd684a909b407689c6dec7db13bc7d8b
    env_file:
      - .env
    healthcheck:
      test: ["CMD-SHELL", "nc -z 127.0.0.1 7575 || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 90s
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /volume1/docker/homarr:/appdata:rw
    environment:
      - SECRET_ENCRYPTION_KEY=${HOMARR_SECRET_KEY}
    ports:
      - 7575:7575
    restart: on-failure:5
