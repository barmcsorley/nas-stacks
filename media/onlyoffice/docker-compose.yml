services:
  onlyoffice:
    container_name: OnlyOffice
    image: onlyoffice/documentserver:latest@sha256:fd00acbbbde3d8b1ead9b933aafa7c2df77e62c48b1b171886e6bef343c13882
    restart: unless-stopped
    env_file:
      - /volume2/FastSSD/docker/onlyoffice/.env
    environment:
      - TZ=Europe/London
      - JWT_ENABLED=true
      # JWT_SECRET will be pulled from your .env file
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost/healthcheck"]
      interval: 30s
      timeout: 10s
      retries: 3
    ports:
      - 8467:80
    volumes:
      - /volume2/FastSSD/docker/onlyoffice/data:/var/www/onlyoffice/Data:rw
      - /volume2/FastSSD/docker/onlyoffice/logs:/var/log/onlyoffice:rw
      - /volume2/FastSSD/docker/onlyoffice/lib:/var/lib/onlyoffice:rw
    networks:
      - web_proxy

networks:
  web_proxy:
    external: true