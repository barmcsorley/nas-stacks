services:
  music-archiver:
    image: python:3.14-slim@sha256:9006fc63e3eaedc00ebc81193c99528575a2f9b9e3fb36d95e94814c23f31f47
    container_name: music-archiver
    restart: unless-stopped
    volumes:
      - /volume2/FastSSD/docker/music-archiver:/app/data
      - /volume2/FastSSD/docker/music-archiver/scripts:/app/scripts
    env_file:
      - .env
    environment:
      - TZ=Europe/London
    working_dir: /app
    # Array syntax prevents "mapping" errors
    command: ["sh", "-c", "while true; do python /app/scripts/sync_playlists.py; echo 'Sleeping 12 hours...'; sleep 43200; done"]
