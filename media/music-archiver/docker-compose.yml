services:
  music-archiver:
    image: python:3.14-slim@sha256:6a27522252aef8432841f224d9baaa6e9fce07b07584154fa0b9a96603af7456
    container_name: music-archiver
    restart: unless-stopped
    volumes:
      - /volume2/FastSSD/docker/music-archiver:/app/data
      - /volume2/FastSSD/docker/music-archiver/scripts:/app/scripts
    env_file:
      - .env
    environment:
      - TZ=Europe/London
    working_dir: /app
    # Array syntax prevents "mapping" errors
    command: ["sh", "-c", "while true; do python /app/scripts/sync_playlists.py; echo 'Sleeping 12 hours...'; sleep 43200; done"]
