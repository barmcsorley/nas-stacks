services:
  music-archiver:
    image: python:3.14-slim@sha256:9b81fe9acff79e61affb44aaf3b6ff234392e8ca477cb86c9f7fd11732ce9b6a
    container_name: music-archiver
    restart: unless-stopped
    volumes:
      - /volume2/FastSSD/docker/music-archiver:/app/data
      - /volume2/FastSSD/docker/music-archiver/scripts:/app/scripts
    env_file:
      - .env
    environment:
      - TZ=Europe/London
    working_dir: /app
    # Array syntax prevents "mapping" errors
    command: ["sh", "-c", "while true; do python /app/scripts/sync_playlists.py; echo 'Sleeping 12 hours...'; sleep 43200; done"]
