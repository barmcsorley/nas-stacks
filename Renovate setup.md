ðŸ”„ Automated Update Strategy (Renovate & GitOps)This repository uses a GitOps model to manage Docker container updates. Instead of manually pulling images or using Watchtower, we use Renovate (via Mend.io) to scan for updates, create Pull Requests (PRs), and trigger our deployment pipeline.ðŸ›  Architecture OverviewDetection: Renovate runs hourly, scanning all docker-compose.yaml files for outdated Docker images.Reporting: Pending updates are listed in a Dependency Dashboard (GitHub Issue).Approval: Updates are selected manually from the Dashboard to generate Pull Requests.Deployment: Merging a PR into main triggers the self-hosted GitHub Runner on the NAS to pull the new image and redeploy the container.âš™ï¸ Configuration DetailsThe logic is defined in renovate.json5 at the root of the repository.Key RulesManual Approval: Automerge is disabled. All updates require human review to ensure stability."Latest" Tag Management:If a container uses image: plex:latest, Renovate will create a PR to "pin" it to a specific digest (e.g., plex:latest@sha256:...).This ensures immutable deploymentsâ€”we always know exactly which version is running.Database Safety:Major version updates for databases (Postgres, MariaDB, Mongo, Redis) are blocked.Reason: Major DB upgrades often require manual data export/import and can corrupt data if done automatically.Noise Reduction:Non-major updates (minor/patch) are grouped into single PRs where possible to reduce clutter.Settings ReferenceSettingValueDescriptiondependencyDashboardtrueMaintains a persistent "Master List" issue of all available updates.prHourlyLimit0 (Unlimited)Allows all PRs to be created immediately (bypassing spam filters).assigneesNoneWe do not assign users; we track via the Dashboard.ðŸš€ How to Process Updates1. Check for UpdatesOption A: Look at the Homarr Dashboard on the NAS (via the GitHub widget).Option B: Go to the Issues tab in this repo and open the pinned issue titled "Dependency Dashboard".2. Approve & Trigger PRsRenovate runs in "Interactive Mode." It finds updates but waits for permission to create the PR.Open the Dependency Dashboard issue.Tick the checkbox [x] next to the updates you want to apply.Wait for Renovate's next run (or trigger it manually via the Mend Dashboard).Renovate will generate a Pull Request for the selected items.3. Review & MergeGo to the Pull Requests tab.Review the changelogs provided by Renovate.Click Merge Pull Request.âœ… Done. The NAS Runner picks up the change and deploys it automatically.ðŸ”§ TroubleshootingThe Dashboard is missing or "Stale"If the Dependency Dashboard issue is closed or not updating:Go to Issues -> Closed.Find "Dependency Dashboard".Reopen it, or rename it to "Old Dashboard" and close it again to force a new creation.Renovate seems "Silent" (No PRs created)If you tick a box but no PR appears after ~1 hour:Login to the Mend Developer Portal.Select the nas-stacks repository.Ensure Settings -> Execution Mode is set to Interactive (NOT "Silent").Note: "Silent" mode prevents PR creation entirely.Force a Manual RunTo force Renovate to check immediately (skip the hourly wait):Go to the Mend Dashboard.Click the checkbox next to nas-stacks.Select Actions -> Run Now.
